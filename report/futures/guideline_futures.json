"1": "당신의 지침을 브리핑 하세요",
"2": "지금부터 데이터를 전달하겠습니다. 데이터 분석이 끝나면 완료라고만 하세요",
"3": "전달한 csv, 이미지 데이터를 모두 지침에 맞게 분석한 후, 지침에 따라서 매매의견을 작성하세요"
"4": "이번 거래 결과입니다. 피드백하세요."
"5": "피드백과 대화 내용을 반영해 전략지침을 업데이트 작성하라"



{
  "strategyName": "BTCUSDT Futures Adaptive Strategy",
  "version": "2.3",

  "marketContext": {
    "targetSymbol": "BTCUSDT",
    "timeFrames": ["3m", "5m", "15m", "1h", "4h"],
    "priorityTimeFrames": ["3m", "5m"],
    "description": "단기(3m,5m) 패턴 및 지표 + 중기(15m,1h,4h) 추세·변동성 필터 + 부분 손절/익절 + ChatGPT 피드백 반복"
  },

  "entryLogic": {
    "description": "3m,5m,15m 차트에서 거래량 급등/패턴 및 EMA교차로 진입. 15m/1h/4h 추세와 ATR로 필터링",
    "primaryPatterns": [
      {
        "patternName": "Triangle / Wedge / Double Bottom",
        "condition": "3m 차트에서 패턴 발생 + 거래량 직전 평균 대비 120% 이상 증가 + 패턴 돌파 시 진입"
      },
      {
        "patternName": "EMA(9,21) Crossover",
        "condition": "3m에서 EMA(9)가 EMA(21)을 상향 돌파 → 롱, 하향 돌파 → 숏 (5m 차트도 동일 방향일 경우 신뢰도↑)"
      }
    ],
    "trendFilter": {
      "indicator": "ADX",
      "timeFrame": "15m",
      "threshold": 25,
      "logic": "15m(또는 1h/4h)에서 ADX >= 25 → 추세장. 3m,5m 신호가 추세 방향과 일치하면 진입"
    },
    "trendAccelerationCheck": {
      "enabled": true,
      "logic": "추세장(ADX≥25)이라도 ADX가 빠르게 상승 + RSI가 70 이상이면 분할 진입",
      "note": "추세 과열(가속도) 구간에서 리스크 관리 강화"
    },
    "volatilityFilter": {
      "indicator": "ATR",
      "timeFrame": "15m",
      "dynamicLogic": "15m ATR < (최근 N봉 평균 ATR × 0.8) → 박스권 판단",
      "logic": "박스권이면 신호 무효화(진입 보류)"
    },
    "counterTrendScalping": {
      "enabled": true,
      "logic": "ADX가 하락 국면 전환 + RSI 과매수(70) or 과매도(30) → 3m·5m에서 역추세 스캘핑 소규모 진입",
      "entryCriteria": "3m에서 반전형 캔들 + 거래량 증가 시 진입(계좌 3~5%)",
      "exitCriteria": "±1% 1차 목표 + ATR×0.5 트레일링"
    },
    "executionDelayHandling": {
      "enabled": true,
      "maxPriceDeviationPercent": 0.5,
      "logic": "ChatGPT 제안 진입가 대비 ±0.5% 이상 변동 시 SL/TP 재조정 또는 진입 보류",
      "note": "체결가 괴리가 커서 R:R<2.0 이하가 되면 재설정"
    },
    "noteOnFillPriceRerange": "체결가 괴리로 R:R이 2.0 미만 시 진입 포기 or SL·TP 조정"
  },

  "exitLogic": {
    "stopLoss": {
      "type": "ATR-based",
      "timeFrame": "15m",
      "multiplier": 1.5,
      "description": "15m ATR×1.5로 초기 손절. 3m,5m 급반전 시 부분 손절"
    },
    "takeProfit": {
      "type": "riskReward",
      "riskRewardRatio": 2.0,
      "description": "최소 R:R=2.0 → 1차 익절 목표"
    },
    "partialExit": {
      "enabled": true,
      "logic": "급등/급락 시 일부 수량 익절·손절로 변동성 대응",
      "example": "예: -1% → 30% 손절, -2% → 전량 손절 / 1차 목표 후 스탑로스를 진입가로 이동"
    },
    "trailingStop": {
      "enabled": true,
      "logic": "1차 목표 달성 후, 진입가 or ATR×1.0으로 스톱 조정",
      "example": "3m·5m ATR 기반 트레일링"
    }
  },

  "riskManagement": {
    "dailyMaxLoss": 3,
    "positionSize": {
      "riskPerTradePercent": 10.0,
      "logic": "트레이드 당 계좌 10% 리스크(공격적)"
    },
    "exchangeLotRules": {
      "enabled": true,
      "logic": "바이낸스 선물 최소 주문규정(0.001 BTC) 준수"
    },
    "maxTradeFrequency": {
      "enabled": true,
      "logic": "하루 5~7회 이하 진입, 역추세 스캘핑 추가 2회 허용",
      "reasoning": "오버트레이딩 방지, 고확률 신호 집중"
    },
    "description": "하루 3회 손절 시 매매 중단, 계좌 10% 이내 손실 제한"
  },

  "noiseFilter": {
    "multiTimeFrameConfirmation": {
      "enabled": true,
      "logic": "3m 신호 발생 시 5m, 15m 추세 일치 여부 확인"
    },
    "choppyMarketAvoidance": {
      "enabled": true,
      "indicator": "RSI",
      "threshold": {
        "lower": 45,
        "upper": 55
      },
      "description": "3m,5m RSI가 45~55면 단기 박스권 → 진입 회피/축소"
    }
  },

  "chatGPTIntegration": {
    "feedbackCycle": {
      "description": "사용자와 ChatGPT 간 매매 후 피드백 반복",
      "steps": [
        "1) 전략지침(버전 2.3) 브리핑",
        "2) OHLCV·이미지·csv 전달",
        "3) ChatGPT 매매의견(롱/숏, SL, TP 등)",
        "4) 사용자 실거래 후 종료내역 공유",
        "5) ChatGPT 피드백 → 전략 수정"
      ]
    },
    "conversationFlow": {
      "description": "1~19단계 순서로 데이터 주고받기",
      "steps": {
        "step1": "사용자가 지침 전달",
        "step2": "'전략지침 브리핑' 명령",
        "step3": "chatgpt 브리핑 완료",
        "step4": "사용자가 '지금부터 데이터 전달...' 명령",
        "step5": "chatgpt '완료' 응답",
        "step6": "사용자가 OHLCV 자료 순차 전달",
        "step7": "chatgpt 분석 후 '완료'만 응답",
        "step8": "사용자가 '전략지침에 맞게 매매의견 작성' 명령",
        "step9": "chatgpt 매매의견 제시",
        "step10": "사용자가 거래 실행",
        "step11": "주기적으로 차트 캡처 전달",
        "step12": "chatgpt 의견 업데이트",
        "step13": "사용자 실행",
        "step14": "거래 종료 후 trade history·position history 전달 + 피드백 요구",
        "step15": "chatgpt가 피드백 작성",
        "step16": "사용자, 전략지침 재전달 + 업데이트 요청",
        "step17": "chatgpt가 새 지침 작성",
        "step18": "사용자가 새 지침 + 피드백 json 정리",
        "step19": "사용자가 업데이트된 지침을 chatgpt에 전달, 반복"
      }
    },
    "opinionOutputFormat": {
      "description": "매매의견 작성 시 Entry Price Range, Stop Loss, Take Profit 등 필수기재",
      "fieldsQuickInput": [
        "Position (LONG/SHORT)",
        "Leverage",
        "Size (% of balance)",
        "Entry Price Range",
        "Stop Loss",
        "Take Profit / Partial Exit"
      ],
      "fieldsDetailedRationale": [
        "Brief Rationale (패턴, 지표, 거래량 근거 등)"
      ],
      "note": "6항목 + 상세해설"
    },
    "additionalGuidelines": {
      "useHyphenForRanges": "가격 범위 표기 시 하이픈(-) 사용",
      "provideSingleBestValue": "SL·TP는 단일 최적값, 부분청산 시 단계별 수치 제시"
    }
  },
  "evaluationNotes": {
    "recentResults": {},
    "analysis": [
      "3m,5m,15m 중심 노이즈 주의",
      "부분 손절·익절로 빠른 변동성 대응",
      "ChatGPT 피드백으로 지속 개선"
    ],
    "targets": {
      "desiredWinRate": 50.0,
      "desiredRiskReward": 2.0,
      "desiredProfitFactor": 1.5
    },
    "improvementPlan": [
      "트레일링 스탑, 부분청산 적극 활용",
      "데이터 양이 적을 경우 큰 추세 판단이 어려우므로 보조지표 해석 보수적으로 적용"
    ],
    "executionDelaySlippageHandling": {
      "description": "체결가와 예상 진입가 괴리 1% 이상 → 주문 취소 혹은 재분석",
      "logic": "단기 급등에 의한 슬리피지 방지"
    }
  }
}


